sq.ji=mn.nn();mn.sn(sq.ji,sq.lq,{qn:function(pq){this.oq(pq);this.pq.onComplete=this.ft.on(this);this.pq.jr=this.gt.on(this);this.pq.hr=this._q.on(this);this.pq.timeout=(4094+906);this.frequency=(this.pq.frequency||2);this.at={} ;this._t();} ,gt:function(mu,nu){if(this.pq.ou)this.pq.ou("offline, reconnecting");this.ru();this.su=setTimeout(this._t.on(this),(621+379));} ,_q:function(mu){if(this.pq.ou)this.pq.ou("timeout, reconnecting");this.ru();this.su=setTimeout(this._t.on(this),(724+276));} ,ru:function(){if(this.at.pq)this.at.pq.onComplete=undefined;clearTimeout(this.su);} ,_t:function(){if(this.pq.ki)this.pq.fq=(this.pq.ki)();this.at=new sq.vq(this.pq.url,this.pq);} ,ft:function(fu){try{var ku=sq.uq(fu);if(ku){(this.pq.lu||sq.kq)(ku);} else{if(this.pq.ou)this.pq.ou("reconnecting");} } catch(e){} this.su=setTimeout(this._t.on(this),this.frequency*0x3e8);} } );var li={oi:function(link,title,pi,di,width,height,ei){return'<a href="'+link+'"'+(ei!=null?' class="'+ei+'"':'')+' target="_blank" title="'+title+'" onclick="this.newWindow = window.open(\''+link+'\', \''+pi+'\', \'toolbar=0,scrollbars=0,location=0,status=1,menubar=0,width='+width+',height='+height+',resizable=1\');this.newWindow.focus();this.newWindow.opener=window;return false;">'+di+'</a>';} ,fi:function(content){return'<table class="inner"><tr>'+content+'</tr></table>';} ,gi:function(ai,bi,id,ci,vi,wi,yt,xi){var yi=2;var link=bi+"?thread="+id;var zi='<td>';if(vi||ci){zi+=li.oi((xi||!ci)?link:link+"&viewonly=true",localized[vi?0:1],"ImCenter"+id,ai,01200,(340+140),null);} else{zi+='<a href="#">'+ai+'</a>';} zi+='</td>';if(vi){zi+='<td class="icon">';zi+=li.oi(link,localized[0],"ImCenter"+id,'<img src="'+qh+'/images/tbliclspeak.gif" width="15" height="15" border="0" alt="'+localized[0]+'">',(544+96),0x1e0,null);zi+='</td>';yi++;} if(ci){zi+='<td class="icon">';zi+=li.oi(link+"&viewonly=true",localized[1],"ImCenter"+id,'<img src="'+qh+'/images/tbliclread.gif" width="15" height="15" border="0" alt="'+localized[1]+'">',0x280,0x1e0,null);zi+='</td>';yi++;} if(yt!=""){zi+='</tr><tr><td class="firstmessage" colspan="'+yi+'"><a href="javascript:void(0)" title="'+yt+'" onclick="alert(this.title);return false;">';zi+=yt.length>036?yt.substring(0,0x1e)+'...':yt;zi+='</a></td>';} return li.fi(zi);} ,$i:function(id,_i){return'<td class="icon">'+li.oi(qh+'/operator/ban.php?'+(_i?'id='+_i:'thread='+id),localized[2],"ban"+id,'<img src="'+qh+'/images/ban.gif" width="15" height="15" border="0" alt="'+localized[2]+'">',(645+75),(343+137),null)+'</td>';} } ;sq.mj=mn.nn();mn.sn(sq.mj,sq.lq,{qn:function(pq){this.oq(pq);this.pq.ki=this.ki.on(this);this.pq.ou=this.ou.on(this);this.pq.lu=this.lu.on(this);this.pq.nj=0;this.qj=new Object();this.rj=0;this.t=this.pq.sj;this.tj=new sq.ji(this.pq);} ,ki:function(){return"company="+this.pq.company+"&since="+this.pq.nj;} ,qu:function(du){this.pq.status.innerHTML=du;} ,ou:function(s){this.qu(s);} ,uj:function(ih){var id,hj,ij,ci=false,vi=false,jj=false,wi=null,_i=null;for(var i=0;i<ih.attributes.length;i++){var kj=ih.attributes[i];if(kj.nodeName=="id")id=kj.nodeValue;else if(kj.nodeName=="stateid")hj=kj.nodeValue;else if(kj.nodeName=="state")ij=kj.nodeValue;else if(kj.nodeName=="canopen")vi=true;else if(kj.nodeName=="canview")ci=true;else if(kj.nodeName=="canban")jj=true;else if(kj.nodeName=="ban")wi=kj.nodeValue;else if(kj.nodeName=="banid")_i=kj.nodeValue;} function lj(ds,oj,id,pj){var ws=ls.fs(id,oj,ds);if(ws)ws.innerHTML=pj;} var oj=ls.os("thr"+id,this.t);if(hj=="closed"){if(oj){this.t.deleteRow(oj.rowIndex);} this.qj[id]=null;return;} var dj=qs.rs(ih,"name");var ej=qs.rs(ih,"addr");var fj=qs.rs(ih,"time");var gj=qs.rs(ih,"agent");var aj=qs.rs(ih,"modified");var yt=qs.rs(ih,"message");var bj='<td>'+qs.rs(ih,"useragent")+'</td>';if(wi!=null){bj='<td>'+qs.rs(ih,"reason")+'</td>';} if(jj){bj+=li.$i(id,_i);} bj=li.fi(bj);var cj=ls.os("t"+hj,this.t);var vj=ls.os("t"+hj+"end",this.t);if(oj!=null&&(oj.rowIndex<=cj.rowIndex||oj.rowIndex>=vj.rowIndex)){this.t.deleteRow(oj.rowIndex);this.qj[id]=null;oj=null;} if(oj==null){oj=this.t.insertRow(cj.rowIndex+1);oj.className=(wi=="blocked"&&hj!="chat")?"ban":"in"+hj;oj.id="thr"+id;this.qj[id]=new Array(fj,aj,hj);ls.insertCell(oj,"name","visitor",null,null,li.gi(dj,this.pq.agentservl,id,ci,vi,wi,yt,hj!='chat'));ls.insertCell(oj,"contid","visitor","center",null,ej);ls.insertCell(oj,"state","visitor","center",null,ij);ls.insertCell(oj,"op","visitor","center",null,gj);ls.insertCell(oj,"time","visitor","center",null,this.wj(fj));ls.insertCell(oj,"wait","visitor","center",null,(hj!='chat'?this.wj(aj):'-'));ls.insertCell(oj,"etc","visitor","center",null,bj);if(hj=='wait'||hj=='prio')return true;} else{this.qj[id]=new Array(fj,aj,hj);oj.className=(wi=="blocked"&&hj!="chat")?"ban":"in"+hj;lj(this.t,oj,"name",li.gi(dj,this.pq.agentservl,id,ci,vi,wi,yt,hj!='chat'));lj(this.t,oj,"contid",ej);lj(this.t,oj,"state",ij);lj(this.t,oj,"op",gj);lj(this.t,oj,"time",this.wj(fj));lj(this.t,oj,"wait",(hj!='chat'?this.wj(aj):'-'));lj(this.t,oj,"etc",bj);} return false;} ,xj:function(){function yj(t,id){var cj=$(id);var vj=$(id+"end");if(cj==null||vj==null){return false;} return cj.rowIndex+1<vj.rowIndex;} var zj=$("statustd");if(zj){var $j=yj(this.t,"twait")||yj(this.t,"tprio")||yj(this.t,"tchat");zj.innerHTML=$j?"":this.pq.noclients;zj.height=$j?(1+4):(18+12);} } ,wj:function(_j){var mk=Math.floor(((new Date()).getTime()-_j-this.rj)/01750);var nk=Math.floor(mk/0x3c);var qk="";mk=mk%0x3c;if(mk<(7+3))mk="0"+mk;if(nk>=(55+5)){var rk=Math.floor(nk/074);nk=nk%(40+20);if(nk<012)nk="0"+nk;qk=rk+":";} return qk+nk+":"+mk;} ,sk:function(){for(var i in this.qj){if(this.qj[i]!=null){var value=this.qj[i];var oj=ls.os("thr"+i,this.t);if(oj!=null){function lj(ds,oj,id,pj){var ws=ls.fs(id,oj,ds);if(ws)ws.innerHTML=pj;} lj(this.t,oj,"time",this.wj(value[0]));lj(this.t,oj,"wait",(value[2]!='chat'?this.wj(value[1]):'-'));} } } } ,lu:function(tk){var uk=false;if(tk.tagName=='threads'){var hk=qs.ks(tk,"time");var ik=qs.ks(tk,"revision");if(hk)this.rj=(new Date()).getTime()-hk;if(ik)this.pq.nj=ik;for(var i=0;i<tk.childNodes.length;i++){var ih=tk.childNodes[i];if(ih.tagName=='thread')if(this.uj(ih))uk=true;} this.xj();this.sk();this.qu("Up to date");if(uk){$s(qh+'/sounds/new_user.wav');window.focus();if(updaterOptions.showpopup){alert(localized[(0+5)]);} } } else if(tk.tagName=='error'){this.qu(qs.rs(tk,"descr"));} else{this.qu("reconnecting");} } } );function jk(){if($("sidebar")&&$("wcontent")&&$("togglemenu")){if($("wcontent").className=="contentnomenu"){$("sidebar").style.display="block";$("wcontent").className="contentinner";$("togglemenu").innerHTML=localized[(0+4)];} else{$("sidebar").style.display="none";$("wcontent").className="contentnomenu";$("togglemenu").innerHTML=localized[3];} } } er.lr({'#togglemenu':function(hi){hi.onclick=function(){jk();} ;} } );var qh="";kr.lr(window,'onload',function(){qh=updaterOptions.wroot;new sq.mj(({sj:$("threadlist"),status:$("connstatus")} ).un(updaterOptions||{} ));if(!updaterOptions.havemenu){jk();} } );